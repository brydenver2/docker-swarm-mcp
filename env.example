# Docker MCP Server Configuration
# Copy this file to .env and configure for your environment
# DO NOT commit .env to version control!

# ==============================================================================
# REQUIRED: Authentication
# ==============================================================================

# Bearer token for MCP client authentication
# Generate with: openssl rand -hex 32
MCP_ACCESS_TOKEN=your-secure-token-here-min-32-characters

# ==============================================================================
# OPTIONAL: Multi-Token Authorization
# ==============================================================================

# JSON mapping of tokens to scopes (alternative to single MCP_ACCESS_TOKEN)
# Example: {"token1": ["read-only"], "token2": ["admin"], "token3": ["container-ops"]}
# TOKEN_SCOPES='{"abc123": ["container-ops", "system-ops"], "xyz789": ["admin"]}'

# ==============================================================================
# Docker Connection
# ==============================================================================

# Docker daemon socket (unix, tcp, or ssh)
DOCKER_HOST=unix:///var/run/docker.sock
# DOCKER_HOST=tcp://remote-host:2376
# DOCKER_HOST=ssh://user@remote-host

# TLS configuration (for tcp:// connections)
DOCKER_TLS_VERIFY=0
DOCKER_CERT_PATH=
# DOCKER_CERT_PATH=/path/to/certs  # Directory containing ca.pem, cert.pem, key.pem

# ==============================================================================
# MCP Protocol Configuration
# ==============================================================================

# Transport mode (http or sse)
MCP_TRANSPORT=http

# MCP protocol version
MCP_PROTOCOL_VERSION=2024-11-05

# Tool execution timeouts (seconds)
MCP_TOOL_TIMEOUT=30
MCP_TIMEOUT_READ_OPS=15    # list, get, info operations
MCP_TIMEOUT_WRITE_OPS=30   # create, start, stop operations
MCP_TIMEOUT_DELETE_OPS=45  # remove, delete operations

# Schema validation
ENFORCE_OUTPUT_SCHEMA=false  # Enforce response schema validation
STRICT_CONTEXT_LIMIT=false   # Enforce strict context size limits

# ==============================================================================
# Intent Classification
# ==============================================================================

# Enable automatic task-type detection from queries
INTENT_CLASSIFICATION_ENABLED=true

# Fallback to all tools if no intent detected
INTENT_FALLBACK_TO_ALL=true

# Minimum confidence threshold for intent classification (0.0 - 1.0)
INTENT_MIN_CONFIDENCE=0.0

# Priority: "intent" (use detected intent) or "explicit" (prefer explicit task_type param)
INTENT_PRECEDENCE=intent

# ==============================================================================
# Logging & CORS
# ==============================================================================

# Logging level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# CORS allowed origins (comma-separated)
# Development: Use wildcard or localhost
ALLOWED_ORIGINS=*

# Production: Use specific domain(s)
# ALLOWED_ORIGINS=https://your-domain.com,https://app.your-domain.com

# ==============================================================================
# Production Security Checklist
# ==============================================================================
# Before deploying to production:
# ✓ Generate strong MCP_ACCESS_TOKEN (openssl rand -hex 32)
# ✓ Set specific ALLOWED_ORIGINS (not *)
# ✓ Deploy behind TLS reverse proxy or VPN
# ✓ Set LOG_LEVEL=INFO (not DEBUG)
# ✓ Enable DOCKER_TLS_VERIFY=1 for remote connections
# ✓ Configure token rotation schedule
# ✓ Set up monitoring and alerting
# ✓ Review SECURITY.md for complete checklist

